(()=>{const e=document.querySelector("#nav-search-input"),t=document.querySelector("#nav-search-results"),n=e?e.closest(".nav-search-wrap"):null;if(!e||!t||!n)return;const r=6,s=new Set(["Theme","Socials"]);let o=[],i=[],a=[],l=-1;const c=e=>"string"==typeof e?e.trim().toLowerCase():"",d=e=>e.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#39;"),u=e=>e&&"string"==typeof e.title&&e.title.trim().length>0&&"function"==typeof e.handler&&!s.has(e.section),p=()=>{t.hidden=!0,t.innerHTML="",a=[],l=-1},h=e=>{const n=t.querySelectorAll(".nav-search-option");if(n.forEach(e=>e.classList.remove("nav-search-option--active")),e<0||e>=n.length)return void(l=-1);l=e;const r=n[e];r.classList.add("nav-search-option--active"),r.scrollIntoView({block:"nearest"})},v=e=>{e.length?(a=e,l=-1,t.innerHTML=e.map((e,t)=>`\n          <button type="button" class="nav-search-option" data-index="${t}">\n            <span class="nav-search-option-title">${d(e.title)}</span>\n            ${e.section?`<span class="nav-search-option-meta">${d(e.section)}</span>`:""}\n          </button>\n        `).join(""),t.hidden=!1):p()},f=e=>{const t=c(e);if(!t)return i.length?i.slice(0,r):o.slice(0,r);const n=[],s=[],a=[],l=[];for(const e of o){const r=c(e.title),o=c(e.description),i=c(e.section);r===t?n.push(e):r.startsWith(t)?s.push(e):r.includes(t)?a.push(e):(o.includes(t)||i.includes(t))&&l.push(e)}return n.concat(s,a,l).slice(0,r)},g=t=>{t&&"function"==typeof t.handler&&(e.value=t.title,p(),t.handler())},m=()=>{const e=document.querySelector("ninja-keys");if(!e||!Array.isArray(e.data))return!1;const t=new Set,n=e.data.filter(u).filter(e=>{const n=`${c(e.title)}::${c(e.section)}`;return!t.has(n)&&(t.add(n),!0)}).map(e=>({title:e.title.trim(),section:e.section||"",description:"string"==typeof e.description?e.description:"",handler:e.handler}));return i=n.filter(e=>"Navigation"===e.section),o=[...n].sort((e,t)=>e.title.localeCompare(t.title)),o.length>0},y=()=>{(o.length||m())&&v(f(e.value))};e.addEventListener("focus",()=>{y()}),e.addEventListener("input",()=>{y()}),e.addEventListener("keydown",n=>{if("ArrowDown"===n.key){if(t.hidden&&y(),!a.length)return;n.preventDefault();const e=l<a.length-1?l+1:0;return void h(e)}if("ArrowUp"===n.key){if(t.hidden&&y(),!a.length)return;n.preventDefault();const e=l>0?l-1:a.length-1;return void h(e)}if("Enter"===n.key){n.preventDefault();const t=f(e.value)[0],r=l>=0?a[l]:t;return void(r&&g(r))}"Escape"===n.key&&p()}),t.addEventListener("mousedown",e=>{const t=e.target.closest(".nav-search-option");if(!t)return;e.preventDefault();const n=Number.parseInt(t.dataset.index||"-1",10);Number.isNaN(n)||n<0||n>=a.length||g(a[n])}),document.addEventListener("click",e=>{n.contains(e.target)||p()});let L=0;const w=()=>{if(m())return;const e=setInterval(()=>{L+=1,(m()||L>40)&&clearInterval(e)},100)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",w):w()})();